"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildRoute = void 0;
const noop = () => { };
const methods = ['get', 'post', 'delete', 'patch', 'put'];
const reflectors = ['toString'];
function buildRoute(manager) {
    const path = [''];
    const handler = {
        get(target, property) {
            if (reflectors.includes(property))
                return () => path.join('/');
            if (methods.includes(property)) {
                const routeBucket = [];
                let currentDirectory;
                for (let i = 0; i < path.length; i++) {
                    currentDirectory = path[i];
                    if (/\d{1,20}/g.test(currentDirectory)) {
                        routeBucket.push(':id');
                    }
                    else {
                        routeBucket.push(currentDirectory);
                    }
                }
                return (options) => manager.request(property, path.join('/'), Object.assign({ route: routeBucket.join('/') }, options));
            }
            path.push(property);
            return new Proxy(noop, handler);
        },
        apply(target, _, argumentsList) {
            path.push(...argumentsList.filter(arg => arg != null));
            return new Proxy(noop, handler);
        },
    };
    return new Proxy(noop, handler);
}
exports.buildRoute = buildRoute;
//# sourceMappingURL=APIRouter.js.map